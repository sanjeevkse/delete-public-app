{
  "info": {
    "_postman_id": "posts-feed-testing-collection",
    "name": "Posts API - Complete Testing",
    "description": "Comprehensive test suite for posts-related functionalities including CRUD operations, media handling, and reactions",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json",
    "_exporter_id": "1182352"
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "1. Request OTP",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": ["pm.collectionVariables.set('contactNumber', '9876543210');"],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const responseBody = pm.response.json();",
                  "    if (responseBody.data && responseBody.data.otp) {",
                  "        pm.collectionVariables.set('otpCode', responseBody.data.otp);",
                  "        console.log('OTP extracted:', responseBody.data.otp);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"contactNumber\": \"{{contactNumber}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/request-otp",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "request-otp"]
            }
          },
          "response": []
        },
        {
          "name": "2. Login with OTP",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const responseBody = pm.response.json();",
                  "    pm.environment.set('authToken', responseBody.data.token);",
                  "    pm.environment.set('userId', responseBody.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"contactNumber\": \"{{contactNumber}}\",\n  \"otp\": \"{{otpCode}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Posts - CRUD Operations",
      "item": [
        {
          "name": "1. Create Post (Text Only)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response has correct structure', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody).to.have.property('data');",
                  "    pm.expect(responseBody.data).to.have.property('id');",
                  "    pm.expect(responseBody.data).to.have.property('description');",
                  "    pm.expect(responseBody.data).to.have.property('userId');",
                  "    pm.expect(responseBody.data).to.have.property('latitude');",
                  "    pm.expect(responseBody.data).to.have.property('longitude');",
                  "});",
                  "",
                  "pm.test('Post content matches request', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data.description).to.equal('This is a test post');",
                  "    pm.expect(responseBody.data.latitude).to.equal(12.9716);",
                  "    pm.expect(responseBody.data.longitude).to.equal(77.5946);",
                  "});",
                  "",
                  "pm.test('Save postId for next requests', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.environment.set('postId', responseBody.data.id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"This is a test post\",\n  \"latitude\": 12.9716,\n  \"longitude\": 77.5946,\n  \"locationText\": \"Bangalore, India\",\n  \"tags\": [\"test\", \"bangalore\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts"]
            }
          },
          "response": []
        },
        {
          "name": "2. Get Single Post",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Post data is returned', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data).to.have.property('id');",
                  "    pm.expect(responseBody.data).to.have.property('description');",
                  "    pm.expect(responseBody.data).to.have.property('author');",
                  "});",
                  "",
                  "pm.test('Post has reaction counts', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data).to.have.property('likesCount');",
                  "    pm.expect(responseBody.data).to.have.property('dislikesCount');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{postId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{postId}}"]
            }
          },
          "response": []
        },
        {
          "name": "3. List All Posts",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has pagination', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody).to.have.property('pagination');",
                  "    pm.expect(responseBody.pagination).to.have.property('page');",
                  "    pm.expect(responseBody.pagination).to.have.property('limit');",
                  "    pm.expect(responseBody.pagination).to.have.property('totalRecords');",
                  "    pm.expect(responseBody.pagination).to.have.property('totalPages');",
                  "});",
                  "",
                  "pm.test('Returns array of posts', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/posts?page=1&limit=20&sort=DESC",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "sort",
                  "value": "DESC"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "4. List My Posts",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('All posts belong to current user', function () {",
                  "    const responseBody = pm.response.json();",
                  "    const userId = pm.environment.get('userId');",
                  "    responseBody.data.forEach(function(post) {",
                  "        pm.expect(post.userId.toString()).to.equal(userId.toString());",
                  "    });",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/my-posts?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "my-posts"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "5. Update Post",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Post updated with new content', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data.description).to.equal('Updated post description');",
                  "});",
                  "",
                  "pm.test('Post metadata preserved', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data.latitude).to.equal(13.0827);",
                  "    pm.expect(responseBody.data.longitude).to.equal(80.2707);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"Updated post description\",\n  \"latitude\": 13.0827,\n  \"longitude\": 80.2707,\n  \"locationText\": \"Chennai, India\",\n  \"tags\": [\"updated\", \"chennai\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{postId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{postId}}"]
            }
          },
          "response": []
        },
        {
          "name": "6. Delete Post",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 204 (No Content)', function () {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{postId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{postId}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Posts - Search & Filtering",
      "item": [
        {
          "name": "1. Search Posts by Text",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Search results contain search term', function () {",
                  "    const responseBody = pm.response.json();",
                  "    responseBody.data.forEach(function(post) {",
                  "        pm.expect(post.description.toLowerCase()).to.include('test');",
                  "    });",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/posts?search=test",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts"],
              "query": [
                {
                  "key": "search",
                  "value": "test"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "2. Filter by Tags",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Filtered results returned', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/posts?tags=bangalore",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts"],
              "query": [
                {
                  "key": "tags",
                  "value": "bangalore"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "3. Filter by Location",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Location filtering works', function () {",
                  "    const responseBody = pm.response.json();",
                  "    responseBody.data.forEach(function(post) {",
                  "        pm.expect(post.latitude).to.equal(12.9716);",
                  "        pm.expect(post.longitude).to.equal(77.5946);",
                  "    });",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/posts?latitude=12.9716&longitude=77.5946",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts"],
              "query": [
                {
                  "key": "latitude",
                  "value": "12.9716"
                },
                {
                  "key": "longitude",
                  "value": "77.5946"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Posts - Reactions",
      "item": [
        {
          "name": "1. Like a Post",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Reaction recorded correctly', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data).to.have.property('reaction');",
                  "    pm.expect(responseBody.data.reaction).to.equal('LIKE');",
                  "});",
                  "",
                  "pm.test('Reaction counts available', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data).to.have.property('counts');",
                  "    pm.expect(responseBody.data.counts).to.have.property('likes');",
                  "    pm.expect(responseBody.data.counts).to.have.property('dislikes');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reaction\": \"LIKE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{postId}}/reactions",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{postId}}", "reactions"]
            }
          },
          "response": []
        },
        {
          "name": "2. Dislike a Post",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Dislike reaction recorded', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data.reaction).to.equal('DISLIKE');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reaction\": \"DISLIKE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{postId}}/reactions",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{postId}}", "reactions"]
            }
          },
          "response": []
        },
        {
          "name": "3. Remove Reaction",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Reaction removed', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data.reaction).to.equal(null);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reaction\": \"NO_REACTION\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{postId}}/reactions",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{postId}}", "reactions"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Posts - Media Management",
      "item": [
        {
          "name": "1. Create Post with Media (Form-Data)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Post created with media', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data).to.have.property('media');",
                  "    pm.expect(responseBody.data.media).to.be.an('array');",
                  "    pm.expect(responseBody.data.media.length).to.be.greaterThan(0);",
                  "});",
                  "",
                  "pm.test('Media has required fields', function () {",
                  "    const responseBody = pm.response.json();",
                  "    responseBody.data.media.forEach(function(media) {",
                  "        pm.expect(media).to.have.property('id');",
                  "        pm.expect(media).to.have.property('mediaType');",
                  "        pm.expect(media).to.have.property('mediaUrl');",
                  "        pm.expect(media).to.have.property('positionNumber');",
                  "    });",
                  "});",
                  "",
                  "pm.test('Save postId with media', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.environment.set('postIdWithMedia', responseBody.data.id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "description",
                  "value": "Post with media files",
                  "type": "text"
                },
                {
                  "key": "latitude",
                  "value": "12.9716",
                  "type": "text"
                },
                {
                  "key": "longitude",
                  "value": "77.5946",
                  "type": "text"
                },
                {
                  "key": "locationText",
                  "value": "Bangalore, India",
                  "type": "text"
                },
                {
                  "key": "tags",
                  "value": "[\"media\", \"test\"]",
                  "type": "text"
                },
                {
                  "key": "files",
                  "type": "file",
                  "src": "path/to/image.jpg"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts"]
            }
          },
          "response": []
        },
        {
          "name": "2. Add Media to Post",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Media added to post', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data.media).to.be.an('array');",
                  "    pm.expect(responseBody.data.media.length).to.be.greaterThan(0);",
                  "});",
                  "",
                  "pm.test('Save media IDs for removal test', function () {",
                  "    const responseBody = pm.response.json();",
                  "    const mediaIds = responseBody.data.media.map(m => m.id);",
                  "    pm.environment.set('mediaIds', JSON.stringify(mediaIds));",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "files",
                  "type": "file",
                  "src": "path/to/image2.jpg"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{postIdWithMedia}}/media",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{postIdWithMedia}}", "media"]
            }
          },
          "response": []
        },
        {
          "name": "3. Remove Media from Post",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Media removed from post', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data.media).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"mediaIds\": [1, 2]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{postIdWithMedia}}/media",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{postIdWithMedia}}", "media"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Posts - Error Handling & Validation",
      "item": [
        {
          "name": "1. Create Post - Missing Description",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Error message for missing description', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.message.toLowerCase()).to.include('description');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"latitude\": 12.9716,\n  \"longitude\": 77.5946\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts"]
            }
          },
          "response": []
        },
        {
          "name": "2. Create Post - Missing Coordinates",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Error message for missing coordinates', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.message.toLowerCase()).to.match(/latitude|longitude/);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"Post without coordinates\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts"]
            }
          },
          "response": []
        },
        {
          "name": "3. Get Non-existent Post",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 404', function () {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test('Post not found error', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.message.toLowerCase()).to.include('not found');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/posts/99999",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "99999"]
            }
          },
          "response": []
        },
        {
          "name": "4. React to Non-existent Post",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 404', function () {",
                  "    pm.response.to.have.status(404);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reaction\": \"LIKE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts/99999/reactions",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "99999", "reactions"]
            }
          },
          "response": []
        },
        {
          "name": "5. Invalid Reaction Type",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Invalid reaction error', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.message.toLowerCase()).to.include('reaction');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reaction\": \"LOVE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{postId}}/reactions",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{postId}}", "reactions"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Posts - Pagination Tests",
      "item": [
        {
          "name": "1. First Page",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('First page pagination', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.pagination.page).to.equal(1);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/posts?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "2. Second Page",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Second page pagination', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.pagination.page).to.equal(2);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/posts?page=2&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts"],
              "query": [
                {
                  "key": "page",
                  "value": "2"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "3. Custom Limit",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Custom limit applied', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.pagination.limit).to.equal(5);",
                  "});",
                  "",
                  "pm.test('Results respect limit', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data.length).to.be.lessThanOrEqual(5);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/posts?page=1&limit=5",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "5"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Posts - Complete Flow Test",
      "item": [
        {
          "name": "1. Create Post",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Post created successfully', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Save postId for flow', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.environment.set('flowPostId', responseBody.data.id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"Flow test post\",\n  \"latitude\": 12.9716,\n  \"longitude\": 77.5946,\n  \"tags\": [\"flow\", \"test\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts"]
            }
          },
          "response": []
        },
        {
          "name": "2. Get Created Post",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Post retrieved successfully', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Post content matches', function () {",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data.description).to.equal('Flow test post');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{flowPostId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{flowPostId}}"]
            }
          },
          "response": []
        },
        {
          "name": "3. Like the Post",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Like recorded', function () {",
                  "    pm.response.to.have.status(200);",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data.reaction).to.equal('LIKE');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reaction\": \"LIKE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{flowPostId}}/reactions",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{flowPostId}}", "reactions"]
            }
          },
          "response": []
        },
        {
          "name": "4. Update Post",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Post updated', function () {",
                  "    pm.response.to.have.status(200);",
                  "    const responseBody = pm.response.json();",
                  "    pm.expect(responseBody.data.description).to.equal('Updated flow test post');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"Updated flow test post\",\n  \"latitude\": 12.9716,\n  \"longitude\": 77.5946\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{flowPostId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{flowPostId}}"]
            }
          },
          "response": []
        },
        {
          "name": "5. Delete Post",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Post deleted', function () {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{flowPostId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{flowPostId}}"]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [""]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [""]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8081",
      "type": "string"
    },
    {
      "key": "authToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "postId",
      "value": "",
      "type": "string"
    },
    {
      "key": "postIdWithMedia",
      "value": "",
      "type": "string"
    },
    {
      "key": "mediaIds",
      "value": "",
      "type": "string"
    },
    {
      "key": "flowPostId",
      "value": "",
      "type": "string"
    }
  ]
}
